(()=>{"use strict";function e(e){e.target.closest(".card").remove()}function t(e){e.target.classList.contains("card__like-button")&&e.target.classList.toggle("card__like-button_is-active")}function n(e,t,n,r){var o=e.name,i=e.link,c=document.querySelector("#card-template").content.cloneNode(!0).querySelector(".card"),a=c.querySelector(".card__image");return a.src=i,a.alt=o,c.querySelector(".card__title").textContent=o,a.addEventListener("click",(function(){return r({name:o,link:i})})),c.querySelector(".card__delete-button").addEventListener("click",t),c.querySelector(".card__like-button").addEventListener("click",n),c}var r=null;function o(e){(r=e).classList.add("popup_is-opened"),window.addEventListener("keydown",c),r.addEventListener("click",a)}function i(){r&&(r.classList.remove("popup_is-opened"),window.removeEventListener("keydown",c),r.removeEventListener("click",a),r=null)}function c(e){"Escape"===e.key&&i()}function a(e){(e.target.classList.contains("popup__close")||!e.target.closest(".popup__content")||e.target.classList.contains("popup__button"))&&i()}var s,u=function(e,t,n,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o.textContent=n,o.classList.add(r.errorClass)},l=function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r.textContent="",r.classList.remove(n.errorClass)},p=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n.inactiveButtonClass),t.disabled=!1):(t.classList.add(n.inactiveButtonClass),t.disabled=!0)},d=function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(n){l(e,n,t)})),p(n,r,t)},_={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};s=_,Array.from(document.querySelectorAll(s.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);p(n,r,t),n.forEach((function(o){o.addEventListener("input",(function(){!function(e,t,n){if(t.validity.valid)l(e,t,n);else if(t.validity.valueMissing)u(e,t,"Это поле обязательно для заполнения",n);else if(t.validity.patternMismatch){var r=t.dataset.errorMessage||"Неверный формат";u(e,t,r,n)}else t.validity.tooShort?u(e,t,"Минимум ".concat(t.minLength," символа"),n):t.validity.tooLong?u(e,t,"Максимум ".concat(t.maxLength," символов"),n):t.validity.typeMismatch&&"url"===t.type?u(e,t,"Введите корректный URL",n):u(e,t,t.validationMessage,n)}(e,o,t),p(n,r,t)}))}))}(e,s)}));var m=document.querySelector(".places__list"),v=document.querySelector(".profile__edit-button"),y=document.querySelector(".profile__add-button"),f=document.querySelectorAll(".popup"),S=document.querySelector(".popup_type_edit"),k=S.querySelector(".popup__form"),q=k.querySelector(".popup__input_type_name"),L=k.querySelector(".popup__input_type_description"),g=document.querySelector(".popup_type_new-card"),b=g.querySelector(".popup__form"),E=b.querySelector(".popup__input_type_card-name"),h=b.querySelector(".popup__input_type_url"),C=document.querySelector(".popup_type_image");function x(e){var t=e.name,n=e.link,r=C.querySelector(".popup__image"),i=C.querySelector(".popup__caption");r.src=n,r.alt=t,i.textContent=t,o(C)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(r){var o=n({name:r.name,link:r.link},e,t,x);m.append(o)})),v.addEventListener("click",(function(){q.value=document.querySelector(".profile__title").textContent,L.value=document.querySelector(".profile__description").textContent,d(k,_),o(S)})),k.addEventListener("submit",(function(e){e.preventDefault(),document.querySelector(".profile__title").textContent=q.value,document.querySelector(".profile__description").textContent=L.value,i()})),y.addEventListener("click",(function(){b.reset(),d(b,_),o(g)})),b.addEventListener("submit",(function(r){r.preventDefault();var o=n({name:E.value,link:h.value},e,t,x);m.prepend(o),b.reset(),i()})),f.forEach((function(e){e.classList.add("popup_is-animated")}))})();